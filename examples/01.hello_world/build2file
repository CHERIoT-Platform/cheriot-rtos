firmware{hello_world}: compartment{hello}
{
  threads += (compartment@hello      \
              priority@1             \
              entry_point@say_hello  \
              stack_size@0x200       \
              trusted_stack_frames@1)

  # Alternative way to specify the same as JSON text.
  #
  #\

  threads += '{"compartment":"hello",
               "priority":1,
               "entry_point":"say_hello",
               "stack_size":512,
               "trusted_stack_frames":1}'
  #\
}

compartment{hello}: cxx{hello} \
                    cheriot-rtos/lib/library{freestanding}\
                    cheriot-rtos/lib/library{debug}

# Useful for debugging.
#
#info $serialize($(firmware{hello_world}: threads))


# Example of building multiple firmware versions from the same compartments.
#
#\

./: firmware{hello_world hello_world_large}

firmware{hello_world_large}: compartment{hello}
{
  threads += (compartment@hello      \
              priority@2             \
              entry_point@say_hello  \
              stack_size@0x400       \
              trusted_stack_frames@2)
}
#\
